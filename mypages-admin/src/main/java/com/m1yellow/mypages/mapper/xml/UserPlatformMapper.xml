<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.m1yellow.mypages.mapper.UserPlatformMapper">

    <select id="getUserPlatform" resultType="com.m1yellow.mypages.bo.UserPlatformBo">
        select up.name, up.name_en, up.main_page, up.platform_logo, up.platform_long_logo,
        upr.id, upr.user_id, upr.platform_id, upr.sort_no, upr.is_deleted, upr.create_time, upr.update_time
        from user_platform_relation upr left join user_platform up
        on upr.platform_id = up.id
        where upr.is_deleted = 0
        <if test="userId != null and userId != &quot;&quot;">
            and upr.user_id = #{userId}
        </if>
        <if test="platformId != null and platformId != &quot;&quot;">
            and upr.platform_id = #{platformId}
        </if>
        order by upr.sort_no desc
        limit 1
    </select>

    <select id="queryUserPlatformList" resultType="com.m1yellow.mypages.bo.UserPlatformBo">
        select up.name, up.name_en, up.main_page, up.platform_logo, up.platform_long_logo,
        upr.id, upr.user_id, upr.platform_id, upr.sort_no, upr.is_deleted, upr.create_time, upr.update_time
        from user_platform_relation upr left join user_platform up
        on upr.platform_id = up.id
        where upr.is_deleted = 0
        <if test="userId != null and userId != &quot;&quot;">
            and upr.user_id = #{userId}
        </if>
        order by upr.sort_no desc
    </select>
</mapper>
